{% extends 'base.html' %}

{% block title %}📝 Alterar Cliente{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="text-center mb-5">
        <h1 class="display-4 text-primary">📝 Alterar Cliente</h1>
        <p class="text-muted">🔍 Busque por nome ou telefone para alterar os dados do cliente.</p>
    </div>

    <!-- Formulário Buscar Cliente por Nome -->
    <form method="POST" action="{{ url_for('alterar_cliente') }}" class="mb-4">
        <div class="mb-3">
            <label for="inputNomeCliente" class="form-label">🔍 Buscar Cliente Por Nome:</label>
            <input type="text" class="form-control" id="inputNomeCliente" name="nome" placeholder="Ex: João Silva" aria-describedby="nomeHelp" required>
        </div>
        <button type="submit" class="btn btn-info w-100 btn-lg">🔍 Buscar Por Nome</button>
    </form>

    <!-- Formulário Buscar Cliente por Telefone -->
    <form method="POST" action="{{ url_for('alterar_cliente') }}" class="mb-5">
        <div class="mb-3">
            <label for="inputTelefone" class="form-label">📞 Buscar Cliente Por Telefone:</label>
            <input type="text" class="form-control" id="inputTelefone" name="telefone" placeholder="Ex: (11) 91234-5678" aria-describedby="telefoneHelp" required>
        </div>
        <button type="submit" class="btn btn-info w-100 btn-lg">📞 Buscar Por Telefone</button>
    </form>

    <!-- Resultados da Busca -->
    {% if usuarios %}
    <center>
        <h2 class="text-success">Resultados da Busca:</h2>
    </center>
    <div class="row">
        <div class="col">
            <div class="list-group">
                {% for user in usuarios %}
                <div class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Nome:</strong> {{ user.nome }}<br>
                        <strong>Email:</strong> {{ user.email }}<br>
                        <strong>Telefone:</strong> {{ user.telefone }}<br>
                        {% for endereco in user.enderecos %}
                        <strong>Endereço:</strong> {{ endereco.endereco }}<br>
                        <strong>Complemento:</strong> {{ endereco.complemento }}<br>
                        <strong>Cidade:</strong> {{ endereco.cidade }}<br>
                        <strong>Estado:</strong> {{ endereco.estado }}<br>
                        <strong>CEP:</strong> {{ endereco.cep }}<br>
                        {% endfor %}
                    </div>
                    <a href="{{ url_for('alterar_cliente_id', id=user.id) }}" class="btn btn-success">✏️ Editar</a>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% else %}
    <center>
        <h2 class="text-warning">Nenhum Cliente Encontrado!</h2>
    </center>
    {% endif %}
</div>

<style>
    body {
        background-color: #f9f9f9;
    }

    .form-control {
        border: 2px solid #ced4da;
        border-radius: 8px;
    }

    .form-control:focus {
        border-color: #17a2b8;
        box-shadow: 0 0 5px rgba(23, 162, 184, 0.5);
    }

    .btn {
        border-radius: 30px;
        font-size: 1.1rem;
    }

    .btn-lg {
        padding: 12px;
    }

    .list-group-item {
        border: 1px solid #ddd;
        border-radius: 8px;
        margin-bottom: 10px;
    }

    .text-success {
        color: #28a745 !important;
    }

    .text-warning {
        color: #ffc107 !important;
    }

    .text-muted {
        color: #6c757d !important;
    }

    .btn-success {
        background-color: #28a745;
        border-color: #28a745;
    }

    .btn-info {
        background-color: #17a2b8;
        border-color: #17a2b8;
    }
</style>

{% endblock %}